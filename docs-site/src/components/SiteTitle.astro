---
import type { Props } from '@astrojs/starlight/props';
import config from 'virtual:starlight/user-config';
import VersionBadge from './VersionBadge.astro';

const { hasSiteTitleLogo } = Astro.props;
// Ensure title is a string
const titleText = typeof config.title === 'string' ? config.title : 'ICP CLI';
---

<a href={import.meta.env.BASE_URL} class="site-title sl-flex">
	{
		config.logo && hasSiteTitleLogo && 'src' in config.logo ? (
			<img
				class:list={{ 'light:sl-hidden': config.logo.dark }}
				alt={config.logo.alt}
				src={config.logo.src}
				width={config.logo.width}
				height={config.logo.height}
			/>
		) : null
	}
	{
		config.logo?.dark && hasSiteTitleLogo && 'src' in config.logo.dark ? (
			<img
				class="dark:sl-hidden"
				alt={config.logo.dark.alt || config.logo?.alt}
				src={config.logo.dark.src}
				width={config.logo.dark.width ?? config.logo?.width}
				height={config.logo.dark.height ?? config.logo?.height}
			/>
		) : null
	}
	<span class:list={{ 'sr-only': hasSiteTitleLogo && config.logo?.replacesTitle }}>
		{titleText}
	</span>
	<VersionBadge />
</a>

<style>
	.site-title {
		align-items: center;
		gap: var(--sl-nav-gap);
		font-size: var(--sl-text-h4);
		font-weight: 600;
		color: var(--sl-color-text-accent);
		text-decoration: none;
		white-space: nowrap;
	}
</style>
